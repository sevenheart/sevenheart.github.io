---
title:  关于数据库的QA1
categories:
- SQL
---

### sql语句执行慢的原因

#### 偶尔执行的慢

1. 数据库再刷新脏页：数据库的更新通常是先更新内存然后写入redolog中，空闲后刷入硬盘。
2. 需要操作的数据被加锁了其他线程在用呢。

**刷新脏页触发：**

1. redolog满了
2. 内存不够用了，刷新后淘汰内存中的数据
3. mysql空闲时
4. mysql关闭时

#### 经常执行的慢

##### 1.没用到索引：

1. 条件字段无索引

2. 条件字段赋值符号左边进行了运算如：where c+1>100;

3. 条件字段进行了函数操作pow（c,2）;

##### 数据库选错索引

系统会预测全表扫描快还是索引快。预测出错时可能会不走索引。

可以强制走索引：

```
select * from t force index(a) where c < 100 and c < 100000;
```

或者重置索引让他重新分析怎样快：

```
analyze table t;
```

